from fastapi import FastAPI,HTTPException
import pydantic
from uuid import UUID
app=FastAPI()
books_db = []

@app.get("/books/")
async def get_books():
    return {"books": books_db}

@app.post("/books/",status_code=201)
async def create_book(book:pydantic.Book_Create):
    new_book=pydantic.Book(**book.model_dump())
#pydantic nesnesini normal Python dict’e çevirir -> book.model_dump()
# double star ** dict → keyword arguments
    books_db.append(new_book)
    return new_book

@app.get("/books/{id}",response_model=pydantic.BookBase)
async def book(id:UUID):
    for i in books_db:
        if i.id==id:
            return i
    raise HTTPException(status_code=404, detail="Book not found")
